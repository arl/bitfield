# Control the -pkg flag.
go build -C $BITFIELD_DIR -o $TMPDIR/bitfield
exec $TMPDIR/bitfield -in in.go -out out.go -pkg mypkg
! stderr .
cmp out.go want.go

-- in.go --
package testpkg

type A struct {
	F1    uint8 `bitfield:"2"`
	F2    uint8 `bitfield:"3"`
}

-- want.go --
package mypkg

// Code generated by github.com/arl/bitfield. DO NOT EDIT.

type A uint8

func (a A) F1() uint8 {
	return uint8(a & 0x3)
}

func (a A) SetF1(val uint8) A {
	return a&^0x3 | A(val&0x3)
}

func (a A) F2() uint8 {
	return uint8((a >> 2) & 0x7)
}

func (a A) SetF2(val uint8) A {
	return a&^(0x7<<2) | (A(val&0x7) << 2)
}
